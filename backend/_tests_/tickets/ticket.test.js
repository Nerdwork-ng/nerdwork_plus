import request from "supertest";
import express from "express";
import { authenticate } from "../../src/middleware/common/auth";
import { purchaseTicket } from "../../src/controller/ticket";
const app = express();
app.use(express.json());
app.post("/tickets", authenticate, purchaseTicket);
describe("POST /tickets", () => {
    it("should return 401 if not authenticated", async () => {
        const res = await request(app).post("/tickets").send({});
        expect(res.statusCode).toBe(401);
    });
    // Add a test for success with a mocked auth + event
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGlja2V0LnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0aWNrZXQudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLE9BQU8sTUFBTSxXQUFXLENBQUM7QUFDaEMsT0FBTyxPQUFPLE1BQU0sU0FBUyxDQUFDO0FBQzlCLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNoRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFN0QsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7QUFDdEIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUN4QixHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxZQUFZLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFFbkQsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDN0IsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEtBQUssSUFBSSxFQUFFO1FBQ3RELE1BQU0sR0FBRyxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDekQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkMsQ0FBQyxDQUFDLENBQUM7SUFFSCxvREFBb0Q7QUFDdEQsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVxdWVzdCBmcm9tIFwic3VwZXJ0ZXN0XCI7XHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IGF1dGhlbnRpY2F0ZSB9IGZyb20gXCIuLi8uLi9zcmMvbWlkZGxld2FyZS9jb21tb24vYXV0aFwiO1xyXG5pbXBvcnQgeyBwdXJjaGFzZVRpY2tldCB9IGZyb20gXCIuLi8uLi9zcmMvY29udHJvbGxlci90aWNrZXRcIjtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbmFwcC5wb3N0KFwiL3RpY2tldHNcIiwgYXV0aGVudGljYXRlLCBwdXJjaGFzZVRpY2tldCk7XHJcblxyXG5kZXNjcmliZShcIlBPU1QgL3RpY2tldHNcIiwgKCkgPT4ge1xyXG4gIGl0KFwic2hvdWxkIHJldHVybiA0MDEgaWYgbm90IGF1dGhlbnRpY2F0ZWRcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApLnBvc3QoXCIvdGlja2V0c1wiKS5zZW5kKHt9KTtcclxuICAgIGV4cGVjdChyZXMuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBBZGQgYSB0ZXN0IGZvciBzdWNjZXNzIHdpdGggYSBtb2NrZWQgYXV0aCArIGV2ZW50XHJcbn0pO1xyXG4iXX0=