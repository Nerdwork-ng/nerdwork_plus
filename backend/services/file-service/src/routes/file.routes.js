import { Router } from "express";
import { uploadToS3, uploadForNFT, getPresignedUploadUrl, getUserFiles, getFile, deleteFile, upload } from "../controller/file.js";
import { authenticate } from "../middleware/auth.js";
const router = Router();
// File upload routes (require authentication)
router.post("/upload/s3", authenticate, upload.single('file'), uploadToS3);
router.post("/upload/nft", authenticate, upload.single('file'), uploadForNFT);
router.post("/presigned-url", authenticate, getPresignedUploadUrl);
// File management routes
router.get("/", authenticate, getUserFiles);
router.get("/:id", getFile); // Public access with permission check
router.delete("/:id", authenticate, deleteFile);
export default router;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS5yb3V0ZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmaWxlLnJvdXRlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ2pDLE9BQU8sRUFDTCxVQUFVLEVBQ1YsWUFBWSxFQUNaLHFCQUFxQixFQUNyQixZQUFZLEVBQ1osT0FBTyxFQUNQLFVBQVUsRUFDVixNQUFNLEVBQ1AsTUFBTSx1QkFBdUIsQ0FBQztBQUMvQixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFckQsTUFBTSxNQUFNLEdBQUcsTUFBTSxFQUFFLENBQUM7QUFFeEIsOENBQThDO0FBQzlDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzlFLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLHFCQUFxQixDQUFDLENBQUM7QUFFbkUseUJBQXlCO0FBQ3pCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRSxZQUFZLENBQUMsQ0FBQztBQUM1QyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLHNDQUFzQztBQUNuRSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFFaEQsZUFBZSxNQUFNLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBcclxuICB1cGxvYWRUb1MzLFxyXG4gIHVwbG9hZEZvck5GVCxcclxuICBnZXRQcmVzaWduZWRVcGxvYWRVcmwsXHJcbiAgZ2V0VXNlckZpbGVzLFxyXG4gIGdldEZpbGUsXHJcbiAgZGVsZXRlRmlsZSxcclxuICB1cGxvYWRcclxufSBmcm9tIFwiLi4vY29udHJvbGxlci9maWxlLmpzXCI7XHJcbmltcG9ydCB7IGF1dGhlbnRpY2F0ZSB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGguanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xyXG5cclxuLy8gRmlsZSB1cGxvYWQgcm91dGVzIChyZXF1aXJlIGF1dGhlbnRpY2F0aW9uKVxyXG5yb3V0ZXIucG9zdChcIi91cGxvYWQvczNcIiwgYXV0aGVudGljYXRlLCB1cGxvYWQuc2luZ2xlKCdmaWxlJyksIHVwbG9hZFRvUzMpO1xyXG5yb3V0ZXIucG9zdChcIi91cGxvYWQvbmZ0XCIsIGF1dGhlbnRpY2F0ZSwgdXBsb2FkLnNpbmdsZSgnZmlsZScpLCB1cGxvYWRGb3JORlQpO1xyXG5yb3V0ZXIucG9zdChcIi9wcmVzaWduZWQtdXJsXCIsIGF1dGhlbnRpY2F0ZSwgZ2V0UHJlc2lnbmVkVXBsb2FkVXJsKTtcclxuXHJcbi8vIEZpbGUgbWFuYWdlbWVudCByb3V0ZXNcclxucm91dGVyLmdldChcIi9cIiwgYXV0aGVudGljYXRlLCBnZXRVc2VyRmlsZXMpO1xyXG5yb3V0ZXIuZ2V0KFwiLzppZFwiLCBnZXRGaWxlKTsgLy8gUHVibGljIGFjY2VzcyB3aXRoIHBlcm1pc3Npb24gY2hlY2tcclxucm91dGVyLmRlbGV0ZShcIi86aWRcIiwgYXV0aGVudGljYXRlLCBkZWxldGVGaWxlKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXX0=