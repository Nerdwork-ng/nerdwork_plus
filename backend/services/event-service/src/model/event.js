import { pgTable, uuid, text, timestamp, decimal, integer, boolean, json } from 'drizzle-orm/pg-core';
import { authUsers } from './auth.js';
export const events = pgTable('events', {
    id: uuid('id').primaryKey().defaultRandom(),
    title: text('title').notNull(),
    description: text('description'),
    shortDescription: text('short_description'),
    category: text('category').notNull(), // 'convention', 'meetup', 'workshop', 'signing'
    organizer: text('organizer').notNull(),
    venue: text('venue').notNull(),
    address: text('address').notNull(),
    city: text('city').notNull(),
    state: text('state'),
    country: text('country').notNull(),
    zipCode: text('zip_code'),
    startDateTime: timestamp('start_date_time', { mode: 'date' }).notNull(),
    endDateTime: timestamp('end_date_time', { mode: 'date' }).notNull(),
    timezone: text('timezone').notNull().default('UTC'),
    coverImageUrl: text('cover_image_url'),
    bannerImageUrl: text('banner_image_url'),
    website: text('website'),
    socialLinks: json('social_links'), // {twitter, instagram, facebook}
    tags: json('tags'), // ['comic-con', 'marvel', 'dc']
    ageRestriction: text('age_restriction'), // 'all-ages', '13+', '18+'
    maxAttendees: integer('max_attendees'),
    currentAttendees: integer('current_attendees').notNull().default(0),
    isPublished: boolean('is_published').notNull().default(false),
    isFeatured: boolean('is_featured').notNull().default(false),
    isVirtual: boolean('is_virtual').notNull().default(false),
    virtualLink: text('virtual_link'),
    status: text('status').notNull().default('upcoming'), // 'upcoming', 'ongoing', 'completed', 'cancelled'
    metadata: json('metadata'), // Additional event data
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
export const tickets = pgTable('tickets', {
    id: uuid('id').primaryKey().defaultRandom(),
    eventId: uuid('event_id')
        .notNull()
        .references(() => events.id, { onDelete: 'cascade' }),
    name: text('name').notNull(), // 'General Admission', 'VIP', 'Early Bird'
    description: text('description'),
    type: text('type').notNull().default('paid'), // 'free', 'paid', 'donation'
    price: decimal('price', { precision: 10, scale: 2 }).notNull().default('0.00'),
    nwtPrice: decimal('nwt_price', { precision: 18, scale: 8 }), // Price in NWT tokens
    currency: text('currency').notNull().default('USD'),
    totalQuantity: integer('total_quantity').notNull(),
    availableQuantity: integer('available_quantity').notNull(),
    minQuantityPerOrder: integer('min_quantity_per_order').notNull().default(1),
    maxQuantityPerOrder: integer('max_quantity_per_order').notNull().default(10),
    saleStartDate: timestamp('sale_start_date', { mode: 'date' }),
    saleEndDate: timestamp('sale_end_date', { mode: 'date' }),
    isActive: boolean('is_active').notNull().default(true),
    sortOrder: integer('sort_order').notNull().default(0),
    metadata: json('metadata'), // Additional ticket data like perks, includes
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
export const bookings = pgTable('bookings', {
    id: uuid('id').primaryKey().defaultRandom(),
    userId: uuid('user_id')
        .notNull()
        .references(() => authUsers.id, { onDelete: 'cascade' }),
    eventId: uuid('event_id')
        .notNull()
        .references(() => events.id, { onDelete: 'cascade' }),
    ticketId: uuid('ticket_id')
        .notNull()
        .references(() => tickets.id, { onDelete: 'cascade' }),
    quantity: integer('quantity').notNull().default(1),
    totalPrice: decimal('total_price', { precision: 10, scale: 2 }).notNull(),
    paymentMethod: text('payment_method').notNull(), // 'stripe', 'nwt', 'paypal'
    transactionId: text('transaction_id'), // Reference to wallet transaction or payment
    status: text('status').notNull().default('confirmed'), // 'pending', 'confirmed', 'cancelled', 'refunded'
    attendeeInfo: json('attendee_info'), // Names, emails for tickets
    bookingReference: text('booking_reference').notNull().unique(),
    qrCode: text('qr_code'), // QR code for check-in
    checkInDateTime: timestamp('check_in_date_time', { mode: 'date' }),
    notes: text('notes'),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
export const eventCategories = pgTable('event_categories', {
    id: uuid('id').primaryKey().defaultRandom(),
    name: text('name').notNull().unique(),
    description: text('description'),
    iconUrl: text('icon_url'),
    color: text('color'), // Hex color code
    isActive: boolean('is_active').notNull().default(true),
    sortOrder: integer('sort_order').notNull().default(0),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
});
export const eventReviews = pgTable('event_reviews', {
    id: uuid('id').primaryKey().defaultRandom(),
    userId: uuid('user_id')
        .notNull()
        .references(() => authUsers.id, { onDelete: 'cascade' }),
    eventId: uuid('event_id')
        .notNull()
        .references(() => events.id, { onDelete: 'cascade' }),
    rating: integer('rating').notNull(), // 1-5 stars
    review: text('review'),
    isPublished: boolean('is_published').notNull().default(true),
    helpfulVotes: integer('helpful_votes').notNull().default(0),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJldmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsT0FBTyxFQUNQLElBQUksRUFDSixJQUFJLEVBQ0osU0FBUyxFQUNULE9BQU8sRUFDUCxPQUFPLEVBQ1AsT0FBTyxFQUNQLElBQUksRUFDTCxNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFFdEMsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLEVBQUU7SUFDdEMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxhQUFhLEVBQUU7SUFDM0MsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDOUIsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDaEMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQzNDLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsZ0RBQWdEO0lBQ3RGLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQ3RDLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQzlCLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQ2xDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQzVCLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3BCLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQ2xDLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLGFBQWEsRUFBRSxTQUFT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VUFBVSxFQUFFO0lBQzNFLFNBQVMsRUFBRSxTQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsVUFBVSxFQUFFO0NBQzVFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHBnVGFibGUsXG4gIHV1aWQsXG4gIHRleHQsXG4gIHRpbWVzdGFtcCxcbiAgZGVjaW1hbCxcbiAgaW50ZWdlcixcbiAgYm9vbGVhbixcbiAganNvblxufSBmcm9tICdkcml6emxlLW9ybS9wZy1jb3JlJztcbmltcG9ydCB7IGF1dGhVc2VycyB9IGZyb20gJy4vYXV0aC5qcyc7XG5cbmV4cG9ydCBjb25zdCBldmVudHMgPSBwZ1RhYmxlKCdldmVudHMnLCB7XG4gIGlkOiB1dWlkKCdpZCcpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXG4gIHRpdGxlOiB0ZXh0KCd0aXRsZScpLm5vdE51bGwoKSxcbiAgZGVzY3JpcHRpb246IHRleHQoJ2Rlc2NyaXB0aW9uJyksXG4gIHNob3J0RGVzY3JpcHRpb246IHRleHQoJ3Nob3J0X2Rlc2NyaXB0aW9uJyksXG4gIGNhdGVnb3J5OiB0ZXh0KCdjYXRlZ29yeScpLm5vdE51bGwoKSwgLy8gJ2NvbnZlbnRpb24nLCAnbWVldHVwJywgJ3dvcmtzaG9wJywgJ3NpZ25pbmcnXG4gIG9yZ2FuaXplcjogdGV4dCgnb3JnYW5pemVyJykubm90TnVsbCgpLFxuICB2ZW51ZTogdGV4dCgndmVudWUnKS5ub3ROdWxsKCksXG4gIGFkZHJlc3M6IHRleHQoJ2FkZHJlc3MnKS5ub3ROdWxsKCksXG4gIGNpdHk6IHRleHQoJ2NpdHknKS5ub3ROdWxsKCksXG4gIHN0YXRlOiB0ZXh0KCdzdGF0ZScpLFxuICBjb3VudHJ5OiB0ZXh0KCdjb3VudHJ5Jykubm90TnVsbCgpLFxuICB6aXBDb2RlOiB0ZXh0KCd6aXBfY29kZScpLFxuICBzdGFydERhdGVUaW1lOiB0aW1lc3RhbXAoJ3N0YXJ0X2RhdGVfdGltZScsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKSxcbiAgZW5kRGF0ZVRpbWU6IHRpbWVzdGFtcCgnZW5kX2RhdGVfdGltZScsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKSxcbiAgdGltZXpvbmU6IHRleHQoJ3RpbWV6b25lJykubm90TnVsbCgpLmRlZmF1bHQoJ1VUQycpLFxuICBjb3ZlckltYWdlVXJsOiB0ZXh0KCdjb3Zlcl9pbWFnZV91cmwnKSxcbiAgYmFubmVySW1hZ2VVcmw6IHRleHQoJ2Jhbm5lcl9pbWFnZV91cmwnKSxcbiAgd2Vic2l0ZTogdGV4dCgnd2Vic2l0ZScpLFxuICBzb2NpYWxMaW5rczoganNvbignc29jaWFsX2xpbmtzJyksIC8vIHt0d2l0dGVyLCBpbnN0YWdyYW0sIGZhY2Vib29rfVxuICB0YWdzOiBqc29uKCd0YWdzJyksIC8vIFsnY29taWMtY29uJywgJ21hcnZlbCcsICdkYyddXG4gIGFnZVJlc3RyaWN0aW9uOiB0ZXh0KCdhZ2VfcmVzdHJpY3Rpb24nKSwgLy8gJ2FsbC1hZ2VzJywgJzEzKycsICcxOCsnXG4gIG1heEF0dGVuZGVlczogaW50ZWdlcignbWF4X2F0dGVuZGVlcycpLFxuICBjdXJyZW50QXR0ZW5kZWVzOiBpbnRlZ2VyKCdjdXJyZW50X2F0dGVuZGVlcycpLm5vdE51bGwoKS5kZWZhdWx0KDApLFxuICBpc1B1Ymxpc2hlZDogYm9vbGVhbignaXNfcHVibGlzaGVkJykubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICBpc0ZlYXR1cmVkOiBib29sZWFuKCdpc19mZWF0dXJlZCcpLm5vdE51bGwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgaXNWaXJ0dWFsOiBib29sZWFuKCdpc192aXJ0dWFsJykubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICB2aXJ0dWFsTGluazogdGV4dCgndmlydHVhbF9saW5rJyksXG4gIHN0YXR1czogdGV4dCgnc3RhdHVzJykubm90TnVsbCgpLmRlZmF1bHQoJ3VwY29taW5nJyksIC8vICd1cGNvbWluZycsICdvbmdvaW5nJywgJ2NvbXBsZXRlZCcsICdjYW5jZWxsZWQnXG4gIG1ldGFkYXRhOiBqc29uKCdtZXRhZGF0YScpLCAvLyBBZGRpdGlvbmFsIGV2ZW50IGRhdGFcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG59KTtcblxuZXhwb3J0IGNvbnN0IHRpY2tldHMgPSBwZ1RhYmxlKCd0aWNrZXRzJywge1xuICBpZDogdXVpZCgnaWQnKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICBldmVudElkOiB1dWlkKCdldmVudF9pZCcpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IGV2ZW50cy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxuICBuYW1lOiB0ZXh0KCduYW1lJykubm90TnVsbCgpLCAvLyAnR2VuZXJhbCBBZG1pc3Npb24nLCAnVklQJywgJ0Vhcmx5IEJpcmQnXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLFxuICB0eXBlOiB0ZXh0KCd0eXBlJykubm90TnVsbCgpLmRlZmF1bHQoJ3BhaWQnKSwgLy8gJ2ZyZWUnLCAncGFpZCcsICdkb25hdGlvbidcbiAgcHJpY2U6IGRlY2ltYWwoJ3ByaWNlJywgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KS5ub3ROdWxsKCkuZGVmYXVsdCgnMC4wMCcpLFxuICBud3RQcmljZTogZGVjaW1hbCgnbnd0X3ByaWNlJywgeyBwcmVjaXNpb246IDE4LCBzY2FsZTogOCB9KSwgLy8gUHJpY2UgaW4gTldUIHRva2Vuc1xuICBjdXJyZW5jeTogdGV4dCgnY3VycmVuY3knKS5ub3ROdWxsKCkuZGVmYXVsdCgnVVNEJyksXG4gIHRvdGFsUXVhbnRpdHk6IGludGVnZXIoJ3RvdGFsX3F1YW50aXR5Jykubm90TnVsbCgpLFxuICBhdmFpbGFibGVRdWFudGl0eTogaW50ZWdlcignYXZhaWxhYmxlX3F1YW50aXR5Jykubm90TnVsbCgpLFxuICBtaW5RdWFudGl0eVBlck9yZGVyOiBpbnRlZ2VyKCdtaW5fcXVhbnRpdHlfcGVyX29yZGVyJykubm90TnVsbCgpLmRlZmF1bHQoMSksXG4gIG1heFF1YW50aXR5UGVyT3JkZXI6IGludGVnZXIoJ21heF9xdWFudGl0eV9wZXJfb3JkZXInKS5ub3ROdWxsKCkuZGVmYXVsdCgxMCksXG4gIHNhbGVTdGFydERhdGU6IHRpbWVzdGFtcCgnc2FsZV9zdGFydF9kYXRlJywgeyBtb2RlOiAnZGF0ZScgfSksXG4gIHNhbGVFbmREYXRlOiB0aW1lc3RhbXAoJ3NhbGVfZW5kX2RhdGUnLCB7IG1vZGU6ICdkYXRlJyB9KSxcbiAgaXNBY3RpdmU6IGJvb2xlYW4oJ2lzX2FjdGl2ZScpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICBzb3J0T3JkZXI6IGludGVnZXIoJ3NvcnRfb3JkZXInKS5ub3ROdWxsKCkuZGVmYXVsdCgwKSxcbiAgbWV0YWRhdGE6IGpzb24oJ21ldGFkYXRhJyksIC8vIEFkZGl0aW9uYWwgdGlja2V0IGRhdGEgbGlrZSBwZXJrcywgaW5jbHVkZXNcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG59KTtcblxuZXhwb3J0IGNvbnN0IGJvb2tpbmdzID0gcGdUYWJsZSgnYm9va2luZ3MnLCB7XG4gIGlkOiB1dWlkKCdpZCcpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXG4gIHVzZXJJZDogdXVpZCgndXNlcl9pZCcpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IGF1dGhVc2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxuICBldmVudElkOiB1dWlkKCdldmVudF9pZCcpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IGV2ZW50cy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxuICB0aWNrZXRJZDogdXVpZCgndGlja2V0X2lkJylcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gdGlja2V0cy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxuICBxdWFudGl0eTogaW50ZWdlcigncXVhbnRpdHknKS5ub3ROdWxsKCkuZGVmYXVsdCgxKSxcbiAgdG90YWxQcmljZTogZGVjaW1hbCgndG90YWxfcHJpY2UnLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pLm5vdE51bGwoKSxcbiAgcGF5bWVudE1ldGhvZDogdGV4dCgncGF5bWVudF9tZXRob2QnKS5ub3ROdWxsKCksIC8vICdzdHJpcGUnLCAnbnd0JywgJ3BheXBhbCdcbiAgdHJhbnNhY3Rpb25JZDogdGV4dCgndHJhbnNhY3Rpb25faWQnKSwgLy8gUmVmZXJlbmNlIHRvIHdhbGxldCB0cmFuc2FjdGlvbiBvciBwYXltZW50XG4gIHN0YXR1czogdGV4dCgnc3RhdHVzJykubm90TnVsbCgpLmRlZmF1bHQoJ2NvbmZpcm1lZCcpLCAvLyAncGVuZGluZycsICdjb25maXJtZWQnLCAnY2FuY2VsbGVkJywgJ3JlZnVuZGVkJ1xuICBhdHRlbmRlZUluZm86IGpzb24oJ2F0dGVuZGVlX2luZm8nKSwgLy8gTmFtZXMsIGVtYWlscyBmb3IgdGlja2V0c1xuICBib29raW5nUmVmZXJlbmNlOiB0ZXh0KCdib29raW5nX3JlZmVyZW5jZScpLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgcXJDb2RlOiB0ZXh0KCdxcl9jb2RlJyksIC8vIFFSIGNvZGUgZm9yIGNoZWNrLWluXG4gIGNoZWNrSW5EYXRlVGltZTogdGltZXN0YW1wKCdjaGVja19pbl9kYXRlX3RpbWUnLCB7IG1vZGU6ICdkYXRlJyB9KSxcbiAgbm90ZXM6IHRleHQoJ25vdGVzJyksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyBtb2RlOiAnZGF0ZScgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBldmVudENhdGVnb3JpZXMgPSBwZ1RhYmxlKCdldmVudF9jYXRlZ29yaWVzJywge1xuICBpZDogdXVpZCgnaWQnKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICBuYW1lOiB0ZXh0KCduYW1lJykubm90TnVsbCgpLnVuaXF1ZSgpLFxuICBkZXNjcmlwdGlvbjogdGV4dCgnZGVzY3JpcHRpb24nKSxcbiAgaWNvblVybDogdGV4dCgnaWNvbl91cmwnKSxcbiAgY29sb3I6IHRleHQoJ2NvbG9yJyksIC8vIEhleCBjb2xvciBjb2RlXG4gIGlzQWN0aXZlOiBib29sZWFuKCdpc19hY3RpdmUnKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcbiAgc29ydE9yZGVyOiBpbnRlZ2VyKCdzb3J0X29yZGVyJykubm90TnVsbCgpLmRlZmF1bHQoMCksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyBtb2RlOiAnZGF0ZScgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgZXZlbnRSZXZpZXdzID0gcGdUYWJsZSgnZXZlbnRfcmV2aWV3cycsIHtcbiAgaWQ6IHV1aWQoJ2lkJykucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcbiAgdXNlcklkOiB1dWlkKCd1c2VyX2lkJylcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gYXV0aFVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXG4gIGV2ZW50SWQ6IHV1aWQoJ2V2ZW50X2lkJylcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gZXZlbnRzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXG4gIHJhdGluZzogaW50ZWdlcigncmF0aW5nJykubm90TnVsbCgpLCAvLyAxLTUgc3RhcnNcbiAgcmV2aWV3OiB0ZXh0KCdyZXZpZXcnKSxcbiAgaXNQdWJsaXNoZWQ6IGJvb2xlYW4oJ2lzX3B1Ymxpc2hlZCcpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICBoZWxwZnVsVm90ZXM6IGludGVnZXIoJ2hlbHBmdWxfdm90ZXMnKS5ub3ROdWxsKCkuZGVmYXVsdCgwKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG59KTtcblxuZXhwb3J0IHR5cGUgSW5zZXJ0RXZlbnQgPSB0eXBlb2YgZXZlbnRzLiRpbmZlckluc2VydDtcbmV4cG9ydCB0eXBlIFNlbGVjdEV2ZW50ID0gdHlwZW9mIGV2ZW50cy4kaW5mZXJTZWxlY3Q7XG5cbmV4cG9ydCB0eXBlIEluc2VydFRpY2tldCA9IHR5cGVvZiB0aWNrZXRzLiRpbmZlckluc2VydDtcbmV4cG9ydCB0eXBlIFNlbGVjdFRpY2tldCA9IHR5cGVvZiB0aWNrZXRzLiRpbmZlclNlbGVjdDtcblxuZXhwb3J0IHR5cGUgSW5zZXJ0Qm9va2luZyA9IHR5cGVvZiBib29raW5ncy4kaW5mZXJJbnNlcnQ7XG5leHBvcnQgdHlwZSBTZWxlY3RCb29raW5nID0gdHlwZW9mIGJvb2tpbmdzLiRpbmZlclNlbGVjdDtcblxuZXhwb3J0IHR5cGUgSW5zZXJ0RXZlbnRDYXRlZ29yeSA9IHR5cGVvZiBldmVudENhdGVnb3JpZXMuJGluZmVySW5zZXJ0O1xuZXhwb3J0IHR5cGUgU2VsZWN0RXZlbnRDYXRlZ29yeSA9IHR5cGVvZiBldmVudENhdGVnb3JpZXMuJGluZmVyU2VsZWN0O1xuXG5leHBvcnQgdHlwZSBJbnNlcnRFdmVudFJldmlldyA9IHR5cGVvZiBldmVudFJldmlld3MuJGluZmVySW5zZXJ0O1xuZXhwb3J0IHR5cGUgU2VsZWN0RXZlbnRSZXZpZXcgPSB0eXBlb2YgZXZlbnRSZXZpZXdzLiRpbmZlclNlbGVjdDsiXX0=