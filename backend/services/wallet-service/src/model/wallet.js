import { pgTable, uuid, text, timestamp, decimal, integer, boolean, json } from 'drizzle-orm/pg-core';
import { authUsers } from './auth.js';
export const wallets = pgTable('wallets', {
    id: uuid('id').primaryKey().defaultRandom(),
    userId: uuid('user_id')
        .notNull()
        .references(() => authUsers.id, { onDelete: 'cascade' }),
    nwtBalance: decimal('nwt_balance', { precision: 18, scale: 8 }).notNull().default('0.00000000'),
    totalEarned: decimal('total_earned', { precision: 18, scale: 8 }).notNull().default('0.00000000'),
    totalSpent: decimal('total_spent', { precision: 18, scale: 8 }).notNull().default('0.00000000'),
    connectedWalletAddress: text('connected_wallet_address'), // Solana/Ethereum wallet address
    walletType: text('wallet_type'), // 'phantom', 'solflare', 'metamask', etc.
    isActive: boolean('is_active').notNull().default(true),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
export const transactions = pgTable('transactions', {
    id: uuid('id').primaryKey().defaultRandom(),
    userId: uuid('user_id')
        .notNull()
        .references(() => authUsers.id, { onDelete: 'cascade' }),
    walletId: uuid('wallet_id')
        .notNull()
        .references(() => wallets.id, { onDelete: 'cascade' }),
    type: text('type').notNull(), // 'purchase', 'spend', 'earn', 'refund'
    amount: decimal('amount', { precision: 18, scale: 8 }).notNull(),
    description: text('description').notNull(),
    referenceId: text('reference_id'), // Reference to comic purchase, event ticket, etc.
    referenceType: text('reference_type'), // 'comic', 'event', 'ticket', etc.
    status: text('status').notNull().default('completed'), // 'pending', 'completed', 'failed', 'cancelled'
    paymentMethod: text('payment_method'), // 'stripe', 'paypal', 'crypto', etc.
    externalTransactionId: text('external_transaction_id'), // Stripe payment intent, etc.
    metadata: json('metadata'), // Additional transaction data
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
export const paymentMethods = pgTable('payment_methods', {
    id: uuid('id').primaryKey().defaultRandom(),
    userId: uuid('user_id')
        .notNull()
        .references(() => authUsers.id, { onDelete: 'cascade' }),
    type: text('type').notNull(), // 'card', 'bank_account', 'paypal'
    provider: text('provider').notNull(), // 'stripe', 'paypal'
    externalId: text('external_id').notNull(), // Stripe customer ID, PayPal account ID
    last4: text('last4'), // Last 4 digits for cards
    brand: text('brand'), // 'visa', 'mastercard', etc.
    expiryMonth: integer('expiry_month'),
    expiryYear: integer('expiry_year'),
    isDefault: boolean('is_default').notNull().default(false),
    isActive: boolean('is_active').notNull().default(true),
    metadata: json('metadata'),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
export const nwtPricing = pgTable('nwt_pricing', {
    id: uuid('id').primaryKey().defaultRandom(),
    packageName: text('package_name').notNull(), // 'starter', 'premium', 'mega'
    nwtAmount: decimal('nwt_amount', { precision: 18, scale: 8 }).notNull(),
    usdPrice: decimal('usd_price', { precision: 10, scale: 2 }).notNull(),
    bonusPercentage: decimal('bonus_percentage', { precision: 5, scale: 2 }).notNull().default('0.00'),
    isActive: boolean('is_active').notNull().default(true),
    description: text('description'),
    displayOrder: integer('display_order').notNull().default(0),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
    updatedAt: timestamp('updated_at', { mode: 'date' }).notNull().defaultNow(),
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FsbGV0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2FsbGV0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxPQUFPLEVBQ1AsSUFBSSxFQUNKLElBQUksRUFDSixTQUFTLEVBQ1QsT0FBTyxFQUNQLE9BQU8sRUFDUCxPQUFPLEVBQ1AsSUFBSSxFQUNMLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUV0QyxNQUFNLENBQUMsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRTtJQUN4QyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDLGFBQWEsRUFBRTtJQUMzQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQztTQUNwQixPQUFPLEVBQUU7U0FDVCxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsQ0FBQztJQUMxRCxVQUFVLEVBQUUsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztJQUMvRixXQUFXLEVBQUUsT0FBTyxDQUFDLGNBQWMsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztJQUNqRyxVQUFVLEVBQUUsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztJQUMvRixzQkFBc0IsRUFBRSxJQUFJLENB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LENBQUMsWUFBWSxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDdkUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxXQUFXLEVBQUUsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRTtJQUNyRSxlQUFlLEVBQUUsT0FBTyxDQUFDLGtCQUFrQixFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0lBQ2xHLFFBQVEsRUFBRSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztJQUN0RCxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUNoQyxZQUFZLEVBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDM0QsU0FBUyxFQUFFLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxVQUFVLEVBQUU7SUFDM0UsU0FBUyxFQUFFLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxVQUFVLEVBQUU7Q0FDNUUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBwZ1RhYmxlLFxyXG4gIHV1aWQsXHJcbiAgdGV4dCxcclxuICB0aW1lc3RhbXAsXHJcbiAgZGVjaW1hbCxcclxuICBpbnRlZ2VyLFxyXG4gIGJvb2xlYW4sXHJcbiAganNvblxyXG59IGZyb20gJ2RyaXp6bGUtb3JtL3BnLWNvcmUnO1xyXG5pbXBvcnQgeyBhdXRoVXNlcnMgfSBmcm9tICcuL2F1dGguanMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHdhbGxldHMgPSBwZ1RhYmxlKCd3YWxsZXRzJywge1xyXG4gIGlkOiB1dWlkKCdpZCcpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXHJcbiAgdXNlcklkOiB1dWlkKCd1c2VyX2lkJylcclxuICAgIC5ub3ROdWxsKClcclxuICAgIC5yZWZlcmVuY2VzKCgpID0+IGF1dGhVc2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIG53dEJhbGFuY2U6IGRlY2ltYWwoJ253dF9iYWxhbmNlJywgeyBwcmVjaXNpb246IDE4LCBzY2FsZTogOCB9KS5ub3ROdWxsKCkuZGVmYXVsdCgnMC4wMDAwMDAwMCcpLFxyXG4gIHRvdGFsRWFybmVkOiBkZWNpbWFsKCd0b3RhbF9lYXJuZWQnLCB7IHByZWNpc2lvbjogMTgsIHNjYWxlOiA4IH0pLm5vdE51bGwoKS5kZWZhdWx0KCcwLjAwMDAwMDAwJyksXHJcbiAgdG90YWxTcGVudDogZGVjaW1hbCgndG90YWxfc3BlbnQnLCB7IHByZWNpc2lvbjogMTgsIHNjYWxlOiA4IH0pLm5vdE51bGwoKS5kZWZhdWx0KCcwLjAwMDAwMDAwJyksXHJcbiAgY29ubmVjdGVkV2FsbGV0QWRkcmVzczogdGV4dCgnY29ubmVjdGVkX3dhbGxldF9hZGRyZXNzJyksIC8vIFNvbGFuYS9FdGhlcmV1bSB3YWxsZXQgYWRkcmVzc1xyXG4gIHdhbGxldFR5cGU6IHRleHQoJ3dhbGxldF90eXBlJyksIC8vICdwaGFudG9tJywgJ3NvbGZsYXJlJywgJ21ldGFtYXNrJywgZXRjLlxyXG4gIGlzQWN0aXZlOiBib29sZWFuKCdpc19hY3RpdmUnKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFuc2FjdGlvbnMgPSBwZ1RhYmxlKCd0cmFuc2FjdGlvbnMnLCB7XHJcbiAgaWQ6IHV1aWQoJ2lkJykucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcclxuICB1c2VySWQ6IHV1aWQoJ3VzZXJfaWQnKVxyXG4gICAgLm5vdE51bGwoKVxyXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gYXV0aFVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgd2FsbGV0SWQ6IHV1aWQoJ3dhbGxldF9pZCcpXHJcbiAgICAubm90TnVsbCgpXHJcbiAgICAucmVmZXJlbmNlcygoKSA9PiB3YWxsZXRzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgdHlwZTogdGV4dCgndHlwZScpLm5vdE51bGwoKSwgLy8gJ3B1cmNoYXNlJywgJ3NwZW5kJywgJ2Vhcm4nLCAncmVmdW5kJ1xyXG4gIGFtb3VudDogZGVjaW1hbCgnYW1vdW50JywgeyBwcmVjaXNpb246IDE4LCBzY2FsZTogOCB9KS5ub3ROdWxsKCksXHJcbiAgZGVzY3JpcHRpb246IHRleHQoJ2Rlc2NyaXB0aW9uJykubm90TnVsbCgpLFxyXG4gIHJlZmVyZW5jZUlkOiB0ZXh0KCdyZWZlcmVuY2VfaWQnKSwgLy8gUmVmZXJlbmNlIHRvIGNvbWljIHB1cmNoYXNlLCBldmVudCB0aWNrZXQsIGV0Yy5cclxuICByZWZlcmVuY2VUeXBlOiB0ZXh0KCdyZWZlcmVuY2VfdHlwZScpLCAvLyAnY29taWMnLCAnZXZlbnQnLCAndGlja2V0JywgZXRjLlxyXG4gIHN0YXR1czogdGV4dCgnc3RhdHVzJykubm90TnVsbCgpLmRlZmF1bHQoJ2NvbXBsZXRlZCcpLCAvLyAncGVuZGluZycsICdjb21wbGV0ZWQnLCAnZmFpbGVkJywgJ2NhbmNlbGxlZCdcclxuICBwYXltZW50TWV0aG9kOiB0ZXh0KCdwYXltZW50X21ldGhvZCcpLCAvLyAnc3RyaXBlJywgJ3BheXBhbCcsICdjcnlwdG8nLCBldGMuXHJcbiAgZXh0ZXJuYWxUcmFuc2FjdGlvbklkOiB0ZXh0KCdleHRlcm5hbF90cmFuc2FjdGlvbl9pZCcpLCAvLyBTdHJpcGUgcGF5bWVudCBpbnRlbnQsIGV0Yy5cclxuICBtZXRhZGF0YToganNvbignbWV0YWRhdGEnKSwgLy8gQWRkaXRpb25hbCB0cmFuc2FjdGlvbiBkYXRhXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0JywgeyBtb2RlOiAnZGF0ZScgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgcGF5bWVudE1ldGhvZHMgPSBwZ1RhYmxlKCdwYXltZW50X21ldGhvZHMnLCB7XHJcbiAgaWQ6IHV1aWQoJ2lkJykucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcclxuICB1c2VySWQ6IHV1aWQoJ3VzZXJfaWQnKVxyXG4gICAgLm5vdE51bGwoKVxyXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gYXV0aFVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgdHlwZTogdGV4dCgndHlwZScpLm5vdE51bGwoKSwgLy8gJ2NhcmQnLCAnYmFua19hY2NvdW50JywgJ3BheXBhbCdcclxuICBwcm92aWRlcjogdGV4dCgncHJvdmlkZXInKS5ub3ROdWxsKCksIC8vICdzdHJpcGUnLCAncGF5cGFsJ1xyXG4gIGV4dGVybmFsSWQ6IHRleHQoJ2V4dGVybmFsX2lkJykubm90TnVsbCgpLCAvLyBTdHJpcGUgY3VzdG9tZXIgSUQsIFBheVBhbCBhY2NvdW50IElEXHJcbiAgbGFzdDQ6IHRleHQoJ2xhc3Q0JyksIC8vIExhc3QgNCBkaWdpdHMgZm9yIGNhcmRzXHJcbiAgYnJhbmQ6IHRleHQoJ2JyYW5kJyksIC8vICd2aXNhJywgJ21hc3RlcmNhcmQnLCBldGMuXHJcbiAgZXhwaXJ5TW9udGg6IGludGVnZXIoJ2V4cGlyeV9tb250aCcpLFxyXG4gIGV4cGlyeVllYXI6IGludGVnZXIoJ2V4cGlyeV95ZWFyJyksXHJcbiAgaXNEZWZhdWx0OiBib29sZWFuKCdpc19kZWZhdWx0Jykubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGlzQWN0aXZlOiBib29sZWFuKCdpc19hY3RpdmUnKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcclxuICBtZXRhZGF0YToganNvbignbWV0YWRhdGEnKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBud3RQcmljaW5nID0gcGdUYWJsZSgnbnd0X3ByaWNpbmcnLCB7XHJcbiAgaWQ6IHV1aWQoJ2lkJykucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcclxuICBwYWNrYWdlTmFtZTogdGV4dCgncGFja2FnZV9uYW1lJykubm90TnVsbCgpLCAvLyAnc3RhcnRlcicsICdwcmVtaXVtJywgJ21lZ2EnXHJcbiAgbnd0QW1vdW50OiBkZWNpbWFsKCdud3RfYW1vdW50JywgeyBwcmVjaXNpb246IDE4LCBzY2FsZTogOCB9KS5ub3ROdWxsKCksXHJcbiAgdXNkUHJpY2U6IGRlY2ltYWwoJ3VzZF9wcmljZScsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSkubm90TnVsbCgpLFxyXG4gIGJvbnVzUGVyY2VudGFnZTogZGVjaW1hbCgnYm9udXNfcGVyY2VudGFnZScsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogMiB9KS5ub3ROdWxsKCkuZGVmYXVsdCgnMC4wMCcpLFxyXG4gIGlzQWN0aXZlOiBib29sZWFuKCdpc19hY3RpdmUnKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcclxuICBkZXNjcmlwdGlvbjogdGV4dCgnZGVzY3JpcHRpb24nKSxcclxuICBkaXNwbGF5T3JkZXI6IGludGVnZXIoJ2Rpc3BsYXlfb3JkZXInKS5ub3ROdWxsKCkuZGVmYXVsdCgwKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IG1vZGU6ICdkYXRlJyB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbmV4cG9ydCB0eXBlIEluc2VydFdhbGxldCA9IHR5cGVvZiB3YWxsZXRzLiRpbmZlckluc2VydDtcclxuZXhwb3J0IHR5cGUgU2VsZWN0V2FsbGV0ID0gdHlwZW9mIHdhbGxldHMuJGluZmVyU2VsZWN0O1xyXG5cclxuZXhwb3J0IHR5cGUgSW5zZXJ0VHJhbnNhY3Rpb24gPSB0eXBlb2YgdHJhbnNhY3Rpb25zLiRpbmZlckluc2VydDtcclxuZXhwb3J0IHR5cGUgU2VsZWN0VHJhbnNhY3Rpb24gPSB0eXBlb2YgdHJhbnNhY3Rpb25zLiRpbmZlclNlbGVjdDtcclxuXHJcbmV4cG9ydCB0eXBlIEluc2VydFBheW1lbnRNZXRob2QgPSB0eXBlb2YgcGF5bWVudE1ldGhvZHMuJGluZmVySW5zZXJ0O1xyXG5leHBvcnQgdHlwZSBTZWxlY3RQYXltZW50TWV0aG9kID0gdHlwZW9mIHBheW1lbnRNZXRob2RzLiRpbmZlclNlbGVjdDtcclxuXHJcbmV4cG9ydCB0eXBlIEluc2VydE53dFByaWNpbmcgPSB0eXBlb2Ygbnd0UHJpY2luZy4kaW5mZXJJbnNlcnQ7XHJcbmV4cG9ydCB0eXBlIFNlbGVjdE53dFByaWNpbmcgPSB0eXBlb2Ygbnd0UHJpY2luZy4kaW5mZXJTZWxlY3Q7Il19