import { pgTable, uuid, text, timestamp, json } from 'drizzle-orm/pg-core';
import { userWallets } from './wallet';
export const nwtTransactions = pgTable('nwt_transactions', {
    id: uuid('id').primaryKey().defaultRandom(),
    userWalletId: uuid('user_wallet_id')
        .notNull()
        .references(() => userWallets.id, { onDelete: 'cascade' }),
    transactionType: text('transaction_type').notNull(), // 'credit' | 'debit'
    category: text('category').notNull(), // 'purchase', 'sale', etc.
    amount: text('amount').notNull(),
    balanceBefore: text('balance_before').notNull(),
    balanceAfter: text('balance_after').notNull(),
    referenceId: text('reference_id'),
    referenceType: text('reference_type'),
    description: text('description').notNull(),
    metadata: json('metadata'),
    blockchainTxHash: text('blockchain_tx_hash'),
    status: text('status').notNull(), // 'pending', 'completed', etc.
    processedAt: timestamp('processed_at', { mode: 'date' }),
    createdAt: timestamp('created_at', { mode: 'date' }).notNull().defaultNow(),
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnd0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibnd0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxPQUFPLEVBQ1AsSUFBSSxFQUNKLElBQUksRUFDSixTQUFTLEVBR1QsSUFBSSxFQUNMLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUl2QyxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixFQUFFO0lBQ3pELEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUMsYUFBYSxFQUFFO0lBQzNDLFlBQVksRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUM7U0FDakMsT0FBTyxFQUFFO1NBQ1QsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFDNUQsZUFBZSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLHFCQUFxQjtJQUMxRSxRQUFRLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLDJCQUEyQjtJQUNqRSxNQUFNLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sRUFBRTtJQUNoQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxFQUFFO0lBQy9DLFlBQVksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQzdDLFdBQVcsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQ2pDLGFBQWEsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUM7SUFDckMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDMUMsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDMUIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQzVDLE1BQU0sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsK0JBQStCO0lBQ2pFLFdBQVcsRUFBRSxTQUFTLENBQUMsY0FBYyxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDO0lBQ3hELFNBQVMsRUFBRSxTQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsVUFBVSxFQUFFO0NBQzVFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgcGdUYWJsZSxcclxuICB1dWlkLFxyXG4gIHRleHQsXHJcbiAgdGltZXN0YW1wLFxyXG4gIGJvb2xlYW4sXHJcbiAgaW50ZWdlcixcclxuICBqc29uXHJcbn0gZnJvbSAnZHJpenpsZS1vcm0vcGctY29yZSc7XHJcbmltcG9ydCB7IHVzZXJXYWxsZXRzIH0gZnJvbSAnLi93YWxsZXQnO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY29uc3Qgbnd0VHJhbnNhY3Rpb25zID0gcGdUYWJsZSgnbnd0X3RyYW5zYWN0aW9ucycsIHtcclxuICBpZDogdXVpZCgnaWQnKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxyXG4gIHVzZXJXYWxsZXRJZDogdXVpZCgndXNlcl93YWxsZXRfaWQnKVxyXG4gICAgLm5vdE51bGwoKVxyXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcldhbGxldHMuaWQsIHsgb25EZWxldGU6ICdjYXNjYWRlJyB9KSxcclxuICB0cmFuc2FjdGlvblR5cGU6IHRleHQoJ3RyYW5zYWN0aW9uX3R5cGUnKS5ub3ROdWxsKCksIC8vICdjcmVkaXQnIHwgJ2RlYml0J1xyXG4gIGNhdGVnb3J5OiB0ZXh0KCdjYXRlZ29yeScpLm5vdE51bGwoKSwgLy8gJ3B1cmNoYXNlJywgJ3NhbGUnLCBldGMuXHJcbiAgYW1vdW50OiB0ZXh0KCdhbW91bnQnKS5ub3ROdWxsKCksXHJcbiAgYmFsYW5jZUJlZm9yZTogdGV4dCgnYmFsYW5jZV9iZWZvcmUnKS5ub3ROdWxsKCksXHJcbiAgYmFsYW5jZUFmdGVyOiB0ZXh0KCdiYWxhbmNlX2FmdGVyJykubm90TnVsbCgpLFxyXG4gIHJlZmVyZW5jZUlkOiB0ZXh0KCdyZWZlcmVuY2VfaWQnKSxcclxuICByZWZlcmVuY2VUeXBlOiB0ZXh0KCdyZWZlcmVuY2VfdHlwZScpLFxyXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLm5vdE51bGwoKSxcclxuICBtZXRhZGF0YToganNvbignbWV0YWRhdGEnKSxcclxuICBibG9ja2NoYWluVHhIYXNoOiB0ZXh0KCdibG9ja2NoYWluX3R4X2hhc2gnKSxcclxuICBzdGF0dXM6IHRleHQoJ3N0YXR1cycpLm5vdE51bGwoKSwgLy8gJ3BlbmRpbmcnLCAnY29tcGxldGVkJywgZXRjLlxyXG4gIHByb2Nlc3NlZEF0OiB0aW1lc3RhbXAoJ3Byb2Nlc3NlZF9hdCcsIHsgbW9kZTogJ2RhdGUnIH0pLFxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyBtb2RlOiAnZGF0ZScgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgSW5zZXJ0TldUVHJhbnNhY3Rpb24gPSB0eXBlb2Ygbnd0VHJhbnNhY3Rpb25zLiRpbmZlckluc2VydDtcclxuZXhwb3J0IHR5cGUgU2VsZWN0TldUVHJhbnNhY3Rpb24gPSB0eXBlb2Ygbnd0VHJhbnNhY3Rpb25zLiRpbmZlclNlbGVjdDsiXX0=