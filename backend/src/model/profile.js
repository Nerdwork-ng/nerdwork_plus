import { pgTable, uuid, text, timestamp, json, integer, varchar, pgEnum, } from "drizzle-orm/pg-core";
import { authUsers } from "./auth";
import { relations, sql } from "drizzle-orm";
import { userWallets } from "./wallet";
export const userProfiles = pgTable("user_profiles", {
    id: uuid("id").primaryKey().defaultRandom(),
    authUserId: uuid("auth_user_id")
        .notNull()
        .references(() => authUsers.id, { onDelete: "cascade" }),
    firstName: text("first_name"),
    lastName: text("last_name"),
    displayName: text("display_name").notNull(),
    bio: text("bio"),
    avatarUrl: text("avatar_url"),
    dateOfBirth: timestamp("date_of_birth", { mode: "date" }),
    country: text("country"),
    timezone: text("timezone"),
    language: text("language").notNull(),
    preferences: json("preferences").notNull(), // here
    // preferences format
    createdAt: timestamp("created_at", { mode: "date" }).notNull().defaultNow(),
    updatedAt: timestamp("updated_at", { mode: "date" }).notNull().defaultNow(),
});
// --- Wallet type enum (admin asked: "Solana or Phantom")
export const walletTypeEnum = pgEnum("wallet_type_enum", ["solana", "phantom"]);
// --- CREATOR PROFILE ---
export const creatorProfile = pgTable("creator_profile", {
    id: uuid("id").primaryKey().defaultRandom(),
    userId: uuid("user_id")
        .notNull()
        .unique()
        .references(() => authUsers.id, { onDelete: "cascade" }),
    fullName: text("full_name").notNull(),
    creatorName: text("creator_name").notNull(),
    phoneNumber: text("phone_number"),
    bio: text("bio"),
    genres: text("genres")
        .array()
        .notNull()
        .default(sql `'{}'::text[]`),
    walletType: walletTypeEnum("wallet_type"), // 'solana' | 'phantom' (nullable until chosen)
    walletAddress: text("wallet_address"), // nullable until provided
    walletBalance: integer("wallet_balance").notNull().default(0),
    pinHash: text("pin_hash"),
    createdAt: timestamp("created_at", { mode: "date" }).notNull().defaultNow(),
    updatedAt: timestamp("updated_at", { mode: "date" }).notNull().defaultNow(),
});
// --- READER PROFILE ---
export const readerProfile = pgTable("reader_profile", {
    id: uuid("id").primaryKey().defaultRandom(),
    userId: uuid("user_id")
        .notNull()
        .unique()
        .references(() => authUsers.id, { onDelete: "cascade" }),
    genres: text("genres")
        .array()
        .notNull()
        .default(sql `'{}'::text[]`),
    // 12-char app wallet ID (generated by backend logic)
    walletId: varchar("wallet_id", { length: 12 }).notNull().unique(),
    walletBalance: integer("wallet_balance").notNull().default(0),
    pinHash: text("pin_hash"),
    createdAt: timestamp("created_at", { mode: "date" }).notNull().defaultNow(),
    updatedAt: timestamp("updated_at", { mode: "date" }).notNull().defaultNow(),
});
export const userProfilesRelations = relations(userProfiles, ({ one }) => ({
    wallet: one(userWallets, {
        fields: [userProfiles.id],
        references: [userWallets.userProfileId],
    }),
    authUser: one(authUsers, {
        fields: [userProfiles.authUserId],
        references: [authUsers.id],
    }),
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZmlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInByb2ZpbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLE9BQU8sRUFDUCxJQUFJLEVBQ0osSUFBSSxFQUNKLFNBQVMsRUFDVCxJQUFJLEVBRUosT0FBTyxFQUNQLE9BQU8sRUFDUCxNQUFNLEdBQ1AsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ25DLE9BQU8sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRTdDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFFdkMsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxlQUFlLEVBQUU7SUFDbkQsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxhQUFhLEVBQUU7SUFDM0MsVUFBVSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUM7U0FDN0IsT0FBTyxFQUFFO1NBQ1QsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFDMUQsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsUUFBUSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDM0IsV0FBVyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDM0MsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDaEIsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsV0FBVyxFQUFFLFNBQVMsQ0FBQyxlQUFlLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUM7SUFDekQsT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDMUIsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDcEMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxPQUFPO0lBQ25ELHFCQUFxQjtJQUNyQixTQUFTLEVBQUUsU0FBUyxDQUFDLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLFVBQVUsRUFBRTtJQUMzRSxTQUFTLEVBQUUsU0FBUyxDQUFDLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLFVBQVUsRUFBRTtDQUM1RSxDQUFDLENBQUM7QUFFSCwwREFBMEQ7QUFDMUQsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBRWhGLDBCQUEwQjtBQUMxQixNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixFQUFFO0lBQ3ZELEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUMsYUFBYSxFQUFFO0lBQzNDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDO1NBQ3BCLE9BQU8sRUFBRTtTQUNULE1BQU0sRUFBRTtTQUNSLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxDQUFDO0lBRTFELFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQ3JDLFdBQVcsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsT0FBTyxFQUFFO0lBQzNDLFdBQVcsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQ2pDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDO0lBRWhCLE1BQU0sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQ25CLEtBQUssRUFBRTtTQUNQLE9BQU8sRUFBRTtTQUNULE9BQU8sQ0FBQyxHQUFHLENBQUEsY0FBYyxDQUFDO0lBQzdCLFVBQVUsRUFBRSxjQUFjLENBQUMsYUFBYSxDQUFDLEVBQUUsK0NBQStDO0lBQzFGLGFBQWEsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRSwwQkFBMEI7SUFDakUsYUFBYSxFQUFFLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFFN0QsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7SUFFekIsU0FBUyxFQUFFLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxVQUFVLEVBQUU7SUFDM0UsU0FBUyxFQUFFLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxVQUFVLEVBQUU7Q0FDNUUsQ0FBQyxDQUFDO0FBRUgseUJBQXlCO0FBQ3pCLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLEVBQUU7SUFDckQsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxhQUFhLEVBQUU7SUFDM0MsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7U0FDcEIsT0FBTyxFQUFFO1NBQ1QsTUFBTSxFQUFFO1NBQ1IsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFFMUQsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUM7U0FDbkIsS0FBSyxFQUFFO1NBQ1AsT0FBTyxFQUFFO1NBQ1QsT0FBTyxDQUFDLEdBQUcsQ0FBQSxjQUFjLENBQUM7SUFFN0IscURBQXFEO0lBQ3JELFFBQVEsRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFO0lBQ2pFLGFBQWEsRUFBRSxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBRTdELE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDO0lBRXpCLFNBQVMsRUFBRSxTQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsVUFBVSxFQUFFO0lBQzNFLFNBQVMsRUFBRSxTQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsVUFBVSxFQUFFO0NBQzVFLENBQUMsQ0FBQztBQXlCSCxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBRyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN6RSxNQUFNLEVBQUUsR0FBRyxDQUFDLFdBQVcsRUFBRTtRQUN2QixNQUFNLEVBQUUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1FBQ3pCLFVBQVUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUM7S0FDeEMsQ0FBQztJQUNGLFFBQVEsRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFO1FBQ3ZCLE1BQU0sRUFBRSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUM7UUFDakMsVUFBVSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztLQUMzQixDQUFDO0NBQ0gsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIHBnVGFibGUsXHJcbiAgdXVpZCxcclxuICB0ZXh0LFxyXG4gIHRpbWVzdGFtcCxcclxuICBqc29uLFxyXG4gIHNlcmlhbCxcclxuICBpbnRlZ2VyLFxyXG4gIHZhcmNoYXIsXHJcbiAgcGdFbnVtLFxyXG59IGZyb20gXCJkcml6emxlLW9ybS9wZy1jb3JlXCI7XHJcbmltcG9ydCB7IGF1dGhVc2VycyB9IGZyb20gXCIuL2F1dGhcIjtcclxuaW1wb3J0IHsgcmVsYXRpb25zLCBzcWwgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcclxuXHJcbmltcG9ydCB7IHVzZXJXYWxsZXRzIH0gZnJvbSBcIi4vd2FsbGV0XCI7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlclByb2ZpbGVzID0gcGdUYWJsZShcInVzZXJfcHJvZmlsZXNcIiwge1xyXG4gIGlkOiB1dWlkKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcclxuICBhdXRoVXNlcklkOiB1dWlkKFwiYXV0aF91c2VyX2lkXCIpXHJcbiAgICAubm90TnVsbCgpXHJcbiAgICAucmVmZXJlbmNlcygoKSA9PiBhdXRoVXNlcnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxyXG4gIGZpcnN0TmFtZTogdGV4dChcImZpcnN0X25hbWVcIiksXHJcbiAgbGFzdE5hbWU6IHRleHQoXCJsYXN0X25hbWVcIiksXHJcbiAgZGlzcGxheU5hbWU6IHRleHQoXCJkaXNwbGF5X25hbWVcIikubm90TnVsbCgpLFxyXG4gIGJpbzogdGV4dChcImJpb1wiKSxcclxuICBhdmF0YXJVcmw6IHRleHQoXCJhdmF0YXJfdXJsXCIpLFxyXG4gIGRhdGVPZkJpcnRoOiB0aW1lc3RhbXAoXCJkYXRlX29mX2JpcnRoXCIsIHsgbW9kZTogXCJkYXRlXCIgfSksXHJcbiAgY291bnRyeTogdGV4dChcImNvdW50cnlcIiksXHJcbiAgdGltZXpvbmU6IHRleHQoXCJ0aW1lem9uZVwiKSxcclxuICBsYW5ndWFnZTogdGV4dChcImxhbmd1YWdlXCIpLm5vdE51bGwoKSxcclxuICBwcmVmZXJlbmNlczoganNvbihcInByZWZlcmVuY2VzXCIpLm5vdE51bGwoKSwgLy8gaGVyZVxyXG4gIC8vIHByZWZlcmVuY2VzIGZvcm1hdFxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwiZGF0ZVwiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJkYXRlXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG4vLyAtLS0gV2FsbGV0IHR5cGUgZW51bSAoYWRtaW4gYXNrZWQ6IFwiU29sYW5hIG9yIFBoYW50b21cIilcclxuZXhwb3J0IGNvbnN0IHdhbGxldFR5cGVFbnVtID0gcGdFbnVtKFwid2FsbGV0X3R5cGVfZW51bVwiLCBbXCJzb2xhbmFcIiwgXCJwaGFudG9tXCJdKTtcclxuXHJcbi8vIC0tLSBDUkVBVE9SIFBST0ZJTEUgLS0tXHJcbmV4cG9ydCBjb25zdCBjcmVhdG9yUHJvZmlsZSA9IHBnVGFibGUoXCJjcmVhdG9yX3Byb2ZpbGVcIiwge1xyXG4gIGlkOiB1dWlkKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHRSYW5kb20oKSxcclxuICB1c2VySWQ6IHV1aWQoXCJ1c2VyX2lkXCIpXHJcbiAgICAubm90TnVsbCgpXHJcbiAgICAudW5pcXVlKClcclxuICAgIC5yZWZlcmVuY2VzKCgpID0+IGF1dGhVc2Vycy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXHJcblxyXG4gIGZ1bGxOYW1lOiB0ZXh0KFwiZnVsbF9uYW1lXCIpLm5vdE51bGwoKSxcclxuICBjcmVhdG9yTmFtZTogdGV4dChcImNyZWF0b3JfbmFtZVwiKS5ub3ROdWxsKCksXHJcbiAgcGhvbmVOdW1iZXI6IHRleHQoXCJwaG9uZV9udW1iZXJcIiksXHJcbiAgYmlvOiB0ZXh0KFwiYmlvXCIpLFxyXG5cclxuICBnZW5yZXM6IHRleHQoXCJnZW5yZXNcIilcclxuICAgIC5hcnJheSgpXHJcbiAgICAubm90TnVsbCgpXHJcbiAgICAuZGVmYXVsdChzcWxgJ3t9Jzo6dGV4dFtdYCksXHJcbiAgd2FsbGV0VHlwZTogd2FsbGV0VHlwZUVudW0oXCJ3YWxsZXRfdHlwZVwiKSwgLy8gJ3NvbGFuYScgfCAncGhhbnRvbScgKG51bGxhYmxlIHVudGlsIGNob3NlbilcclxuICB3YWxsZXRBZGRyZXNzOiB0ZXh0KFwid2FsbGV0X2FkZHJlc3NcIiksIC8vIG51bGxhYmxlIHVudGlsIHByb3ZpZGVkXHJcbiAgd2FsbGV0QmFsYW5jZTogaW50ZWdlcihcIndhbGxldF9iYWxhbmNlXCIpLm5vdE51bGwoKS5kZWZhdWx0KDApLFxyXG5cclxuICBwaW5IYXNoOiB0ZXh0KFwicGluX2hhc2hcIiksXHJcblxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwiZGF0ZVwiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJkYXRlXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG4vLyAtLS0gUkVBREVSIFBST0ZJTEUgLS0tXHJcbmV4cG9ydCBjb25zdCByZWFkZXJQcm9maWxlID0gcGdUYWJsZShcInJlYWRlcl9wcm9maWxlXCIsIHtcclxuICBpZDogdXVpZChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXHJcbiAgdXNlcklkOiB1dWlkKFwidXNlcl9pZFwiKVxyXG4gICAgLm5vdE51bGwoKVxyXG4gICAgLnVuaXF1ZSgpXHJcbiAgICAucmVmZXJlbmNlcygoKSA9PiBhdXRoVXNlcnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxyXG5cclxuICBnZW5yZXM6IHRleHQoXCJnZW5yZXNcIilcclxuICAgIC5hcnJheSgpXHJcbiAgICAubm90TnVsbCgpXHJcbiAgICAuZGVmYXVsdChzcWxgJ3t9Jzo6dGV4dFtdYCksXHJcblxyXG4gIC8vIDEyLWNoYXIgYXBwIHdhbGxldCBJRCAoZ2VuZXJhdGVkIGJ5IGJhY2tlbmQgbG9naWMpXHJcbiAgd2FsbGV0SWQ6IHZhcmNoYXIoXCJ3YWxsZXRfaWRcIiwgeyBsZW5ndGg6IDEyIH0pLm5vdE51bGwoKS51bmlxdWUoKSxcclxuICB3YWxsZXRCYWxhbmNlOiBpbnRlZ2VyKFwid2FsbGV0X2JhbGFuY2VcIikubm90TnVsbCgpLmRlZmF1bHQoMCksXHJcblxyXG4gIHBpbkhhc2g6IHRleHQoXCJwaW5faGFzaFwiKSxcclxuXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgbW9kZTogXCJkYXRlXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcChcInVwZGF0ZWRfYXRcIiwgeyBtb2RlOiBcImRhdGVcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbi8vIGNvbnN0IHNhbXBsZVByZWZlcmVuY2VzID0ge1xyXG4vLyAgIHRoZW1lOiAnZGFyaycsIC8vIG9yICdsaWdodCcgb3IgJ2F1dG8nXHJcbi8vICAgcmVhZGluZ19kaXJlY3Rpb246ICdsdHInLCAvLyBvciAncnRsJ1xyXG4vLyAgIHBhZ2VfdHJhbnNpdGlvbjogJ3NsaWRlJywgLy8gJ2ZhZGUnIG9yICdub25lJ1xyXG4vLyAgIGF1dG9fYm9va21hcms6IHRydWUsXHJcbi8vICAgbm90aWZpY2F0aW9uczoge1xyXG4vLyAgICAgZW1haWxfbm90aWZpY2F0aW9uczogdHJ1ZSxcclxuLy8gICAgIHB1c2hfbm90aWZpY2F0aW9uczogZmFsc2UsXHJcbi8vICAgICBuZXdfY29taWNzOiB0cnVlLFxyXG4vLyAgICAgY3JlYXRvcl91cGRhdGVzOiBmYWxzZSxcclxuLy8gICAgIHBheW1lbnRfYWxlcnRzOiB0cnVlLFxyXG4vLyAgICAgbWFya2V0aW5nOiBmYWxzZSxcclxuLy8gICB9LFxyXG4vLyAgIHByaXZhY3k6IHtcclxuLy8gICAgIHByb2ZpbGVfdmlzaWJpbGl0eTogJ2ZyaWVuZHMnLCAvLyAncHVibGljJyBvciAncHJpdmF0ZSdcclxuLy8gICAgIHJlYWRpbmdfaGlzdG9yeV92aXNpYmxlOiB0cnVlLFxyXG4vLyAgICAgYWxsb3dfZnJpZW5kX3JlcXVlc3RzOiBmYWxzZSxcclxuLy8gICB9LFxyXG4vLyB9O1xyXG5cclxuZXhwb3J0IHR5cGUgSW5zZXJ0VXNlclByb2ZpbGUgPSB0eXBlb2YgdXNlclByb2ZpbGVzLiRpbmZlckluc2VydDtcclxuZXhwb3J0IHR5cGUgU2VsZWN0VXNlclByb2ZpbGUgPSB0eXBlb2YgdXNlclByb2ZpbGVzLiRpbmZlclNlbGVjdDtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VyUHJvZmlsZXNSZWxhdGlvbnMgPSByZWxhdGlvbnModXNlclByb2ZpbGVzLCAoeyBvbmUgfSkgPT4gKHtcclxuICB3YWxsZXQ6IG9uZSh1c2VyV2FsbGV0cywge1xyXG4gICAgZmllbGRzOiBbdXNlclByb2ZpbGVzLmlkXSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2VyV2FsbGV0cy51c2VyUHJvZmlsZUlkXSxcclxuICB9KSxcclxuICBhdXRoVXNlcjogb25lKGF1dGhVc2Vycywge1xyXG4gICAgZmllbGRzOiBbdXNlclByb2ZpbGVzLmF1dGhVc2VySWRdLFxyXG4gICAgcmVmZXJlbmNlczogW2F1dGhVc2Vycy5pZF0sXHJcbiAgfSksXHJcbn0pKTtcclxuIl19